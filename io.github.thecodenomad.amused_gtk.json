{
  "id": "io.github.thecodenomad.amused_gtk",
  "runtime": "org.gnome.Platform",
  "runtime-version": "47",
  "sdk": "org.gnome.Sdk",
  "command": "amused-gtk",
  "finish-args": [
    "--share=network",
    "--share=ipc",
    "--socket=fallback-x11",
    "--device=dri",
    "--socket=wayland",
    "--allow=bluetooth",
    "--system-talk-name=org.bluez"
  ],
  "cleanup": [
    "/include",
    "/lib/pkgconfig",
    "/man",
    "/share/doc",
    "/share/gtk-doc",
    "/share/man",
    "/share/pkgconfig",
    "*.la",
    "*.a"
  ],
  "modules": [
    {
      "name": "libical",
      "buildsystem": "cmake",
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/libical/libical/releases/download/v3.0.18/libical-3.0.18.tar.gz",
          "sha256": "72b7dc1a5937533aee5a2baefc990983b66b141dd80d43b51f80aced4aae219c"
        }
      ],
      "config-opts": [
        "-DCMAKE_INSTALL_PREFIX=/app",
        "-DSHARED_ONLY=ON",
        "-DENABLE_GTK_DOC=OFF"
      ],
      "cleanup": ["/share/man", "/share/doc", "*.a", "*.la"]
    },
    {
      "name": "bluez",
      "buildsystem": "autotools",
      "sources": [
        {
          "type": "archive",
          "url": "http://www.kernel.org/pub/linux/bluetooth/bluez-5.83.tar.xz",
          "sha256": "108522d909d220581399bfec93daab62035539ceef3dda3e79970785c63bd24c"
        }
      ],
      "config-opts": [
        "--prefix=/app",
        "--libexecdir=/app/libexec",
        "--with-udevdir=/app/lib/udev",
        "--with-systemdsystemunitdir=/app/lib/systemd/system",
        "--with-systemduserunitdir=/app/lib/systemd/user",
        "--with-dbusconfdir=/app/share/dbus-1/system.d",
        "--with-dbussessionbusdir=/app/share/dbus-1/services",
        "--with-dbussystembusdir=/app/share/dbus-1/system-services",
        "--enable-tools",
        "--enable-systemd",
        "--disable-static",
        "--disable-manpages",
        "--disable-cups"
      ],
      "cleanup": [
        "/share/man",
        "/share/doc",
        "*.a",
        "*.la",
        "!/share/licenses/bluez/COPYING"
      ]
    },
    "python-deps.json",
    {
      "name": "amused-fork",
      "buildsystem": "simple",
      "build-commands": [
        "pip3 install --verbose --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} --no-build-isolation ."
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/thecodenomad/amused-py",
          "branch": "gen1-reformat",
          "commit": "7a5e33e1fbaa32c6dc69ccc6161c7a15422378ab"
        }
      ]
    },
    {
      "name": "amused-gtk",
      "builddir": true,
      "buildsystem": "meson",
      "sources": [
        {
          "type": "dir",
          "path": "."
        }
      ]
    }
  ]
}
